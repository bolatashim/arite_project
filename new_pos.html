<!DOCTYPE html>
<!-- How to create Mouse Events for D3 -->
<html>

  <head>
    <!-- Load D3 from site -->
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- CSS (Styling) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

    <style type="text/css">

      body {
        margin: 0;
        font-family: sans-serif;
        font-size: 11px;
      }

      .axis path, .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;  /* Round any decimal pixels so it'll render nicely */
      }

      .btn-thehuge {
        height: 100px;
        width: 100px;
        line-height: 150px;
        padding: 0 0 rem;
      }

      .dropAvatarClass {

        background-color: blue;
        cursor: url(0avatar.gif), auto;

      }
    </style>

  </head>
  <body>
    <div>
      <!-- Switch -->
      <div class="switch"  style="position: absolute;right: 50px; top: 50px;">
        <h6 style="margin-top: 20px; text-align: center;">Your Avatar : </h6>
        <label>
          <label for="kim"><img src="1avatar_cur.png" alt="Trump"></label>
            <input name="avatar_switch" type="checkbox" checked="true">
          <span class="lever"></span>
          <label for="trump"><img src="0avatar_cur.png" alt="Trump"></label>
        </label>
        <h5 id="current_avatar_label" style="margin-top: 20px; text-align: center;">Trump</h5>
      </div>

    </div>
    <div class="fixed-action-btn click-to-toggle" style="margin-bottom: 70px;margin-right: 60px; ">
      <a class="btn-floating btn-thehuge">
        <i class="material-icons md-48" onclick="activatemodal()" style="font-size: 60px">add</i>
      </a>
    </div>

      <!-- Modal Trigger -->
    <!-- <a class="waves-effect waves-light btn modal-trigger">Modal</a> -->

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
      <div class="modal-content" style="width: 50%; text-align: center; margin: auto">

        <h3>How do you feel today?</h3>
        <form>
          <select id="input-feeling-select">
            <option selected>Select</option>
            <option>Happy</option>
            <option>Sad</option>
            <option>Excited</option>
            <option>Tired</option>
            <option>Relaxed</option>
            <option>Sleepy</option>
            <option>Angry</option>
          </select>
        <input id="reason" type = "text" placeholder="Because" required ></textarea>
        </form>
        <p id="message" style="color: red"></p>
        <div class="modal-footer">
        <!-- <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a> -->
          <a class="modal-action waves-effect waves-green btn-flat" onclick="cancelModal()">Cancel</a>
          <button class="btn waves-effect waves-light" type="submit" name="action" onclick="feelingSubmit()"> Submit
            <i class="material-icons right">send</i>
          </button>
        </div>
      </div>
    </div>





    <script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="script/jquery.query-object.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <!-- Begin Javascript -->
    <script src="insertemotion.js"></script>
    <script type="text/javascript">
      $("body").css('cursor','pointer');
      var avatar_index = 0;
      function activatemodal() {
        $('.modal').modal();
        $("#modal1").modal("open");
        $('select').material_select();

      }

      function feelingSubmit() {

        var thefeeling = $("#input-feeling-select").find("option:selected").text();
        var thereason = $("#reason").val();

        if (thefeeling == "Select" || thereason == "") {

          $("#message").text("Please, select a feeling and input the reason")

        } else {

          $("#message").text("");
          $("#modal1").modal("close");
          //console.log("The feeling is: ", feeling, "The reason is:", reason);
          feeling = thefeeling;
          reason = thereason;
          activateDropAvatar();
        }
      }

      function cancelModal() {
        $("#modal1").modal("close");
        $("#message").text("");
        $("body").css('cursor','pointer');
      }


      function activateDropAvatar() {
        var theavatar = avatar_index + "avatar_cur.png"
        $("body").css('cursor','url('+ theavatar + '),auto');
        stupidvar = 0;
      }

      $('input[name="avatar_switch"]').on('change', function() {
        if($(this).is(':checked')) {
          avatar_index = 0;
          $("#current_avatar_label").text("Trump");
        } else {
          avatar_index = 1;
          $("#current_avatar_label").text("Kim");
        }
      });

    </script>
  </body>
</html>
